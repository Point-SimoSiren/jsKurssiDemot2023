<!DOCTYPE html>

<html>
<head>

</head>

<body style="margin: 2% 20% 4% 40%;">

         <h1>My Car Collection</h1>


    <div id="car-table"></div>
    <div id="load-div"></div>


    <script>
        function getCarData() {
                document.getElementById("load-div").innerHTML = 
                `<marquee width="60%" direction="down" height="30px">
                    <h3>Loading...</h3></marquee>`

                let carTable = `<table>
                                 <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Model</th>
                                        <th>Model year</th>
                                        <th>Number plate</th>
                                    </tr>
                                </thead>
                                <tbody>`

                fetch('https://autoapicareeria.azurewebsites.net/api/autot')
                .then(res => res.json()) // muutetaan json data javascriptiksi
                .then(data => data.map(car => 
                carTable += `<tr>
                                <td>${car.merkki}</td>
                                <td>${car.malli}</td>
                                <td>${car.vuosimalli}</td>
                                <td>${car.rekisterinumero}</td>
                            </tr>`
                ) )
                            
                setTimeout(() => {
                    carTable += `</tbody></table>`
                
                    document.getElementById("car-table").innerHTML = carTable
                    document.getElementById("load-div").innerHTML = null
                }, 1000)
        }

        getCarData()

    </script>
</body>


</html>